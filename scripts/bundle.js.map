{"version":3,"sources":["node_modules/browser-pack/_prelude.js","scripts/main.js","scripts/priority-nav-scroller.js"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import navScroller from './priority-nav-scroller.js';\n\n// Example\nconst navScrollerExample = navScroller({\n\n});\n\n// const navScrollerExample2 = navScroller({\n//   wrapperSelector: '.nav-scroller-wrapper2',\n//   selector: '.nav-scroller2',\n//   contentSelector: '.nav-scroller-content2'\n// });\n\n// const navScrollerExample3 = navScroller({\n//   wrapperSelector: '.nav-scroller-wrapper3',\n//   selector: '.nav-scroller3',\n//   contentSelector: '.nav-scroller-content3'\n// });\n","/**\n  Horizontal scrolling menu.\n\n  @param {Object} object - Container for all options.\n  @param {string || DOM node} wrapperSelector - Container element selector.\n  @param {string} selector - Scroller element selector.\n  @param {string} contentSelector - Scroller content element selector.\n  @param {string} buttonLeftSelector - Left button selector.\n  @param {string} buttonRightSelector - Right button selector.\n  @param {integer} scrollStep - Amount to scroll on button click.\n\n**/\n\n\nconst navScroller = function({\n    wrapperSelector: wrapperSelector = '.nav-scroller-wrapper',\n    selector: selector = '.nav-scroller',\n    contentSelector: contentSelector = '.nav-scroller-content',\n    buttonLeftSelector: buttonLeftSelector = '.nav-scroller-btn--left',\n    buttonRightSelector: buttonRightSelector = '.nav-scroller-btn--right',\n    scrollStep: scrollStep = 75\n  } = {}) {\n\n  let scrolling = false;\n  let scrollingDirection = '';\n  let scrollOverflow = '';\n  let timeout;\n\n  let navScrollerWrapper;\n\n  if (wrapperSelector.nodeType === 1) {\n    navScrollerWrapper = wrapperSelector;\n  }\n  else {\n    navScrollerWrapper = document.querySelector(wrapperSelector);\n  }\n  if (navScrollerWrapper === undefined || navScrollerWrapper === null) return;\n\n  let navScroller = navScrollerWrapper.querySelector(selector);\n  let navScrollerContent = navScrollerWrapper.querySelector(contentSelector);\n  let navScrollerLeft = navScrollerWrapper.querySelector(buttonLeftSelector);\n  let navScrollerRight = navScrollerWrapper.querySelector(buttonRightSelector);\n\n\n  // Sets overflow\n  const setOverflow = function() {\n    scrollOverflow = getOverflow(navScrollerContent, navScroller);\n    toggleButtons(scrollOverflow);\n  }\n\n\n  // Debounce setting the overflow with requestAnimationFrame\n  const requestSetOverflow = function() {\n    if (timeout) {\n      window.cancelAnimationFrame(timeout);\n    }\n\n    timeout = window.requestAnimationFrame(() => {\n      setOverflow();\n    });\n  }\n\n\n  // Get overflow value on scroller\n  const getOverflow = function(content, container) {\n    let containerMetrics = container.getBoundingClientRect();\n    let containerWidth = containerMetrics.width;\n    let containerMetricsLeft = Math.floor(containerMetrics.left);\n\n    // let contentMetrics = content.getBoundingClientRect();\n    // let contentMetricsRight = Math.floor(contentMetrics.right);\n    // let contentMetricsLeft = Math.floor(contentMetrics.left);\n\n\n    let contentItems = content.querySelectorAll('.nav-scroller-item');\n    let contentMetricsFirst = contentItems[0].getBoundingClientRect();\n    let contentMetricsLast = contentItems[contentItems.length - 1].getBoundingClientRect();\n    let contentMetricsRight = Math.floor(contentMetricsLast.right);\n    let contentMetricsLeft = Math.floor(contentMetricsFirst.left);\n\n    // Offset the values by the left value of the container\n    let offset = containerMetricsLeft;\n    containerMetricsLeft -= offset;\n    contentMetricsRight -= offset + 1; // Due to an off by one bug in iOS\n    contentMetricsLeft -= offset;\n\n    // console.log (containerMetricsLeft, contentMetricsLeft, containerWidth, contentMetricsRight);\n\n    if (containerMetricsLeft > contentMetricsLeft && containerWidth < contentMetricsRight) {\n        return 'both';\n    } else if (contentMetricsLeft < containerMetricsLeft) {\n        return 'left';\n    } else if (contentMetricsRight > containerWidth) {\n        return 'right';\n    } else {\n        return 'none';\n    }\n  }\n\n\n  // Move the scroller with a transform\n  const moveScroller = function(direction) {\n    if (scrolling === true) return;\n\n    setOverflow();\n\n    let scrollDistance = scrollStep;\n    let scrollAvailable;\n\n\n    if (scrollOverflow === direction || scrollOverflow === 'both') {\n\n      if (direction === 'left') {\n        scrollAvailable = navScroller.scrollLeft;\n      }\n\n      if (direction === 'right') {\n        let navScrollerRightEdge = navScroller.getBoundingClientRect().right;\n        let navScrollerContentRightEdge = navScrollerContent.getBoundingClientRect().right;\n\n        scrollAvailable = Math.floor(navScrollerContentRightEdge - navScrollerRightEdge);\n      }\n\n      // If there is less that 1.5 steps available then scroll the full way\n      if (scrollAvailable < (scrollStep * 1.5)) {\n        scrollDistance = scrollAvailable;\n      }\n\n      if (direction === 'right') {\n        scrollDistance *= -1;\n      }\n\n      navScrollerContent.classList.remove('no-transition');\n      navScrollerContent.style.transform = 'translateX(' + scrollDistance + 'px)';\n\n      scrollingDirection = direction;\n      scrolling = true;\n    }\n\n  }\n\n\n  // Set the scroller position and removes transform, called after moveScroller()\n  const setScrollerPosition = function() {\n    var style = window.getComputedStyle(navScrollerContent, null);\n    var transform = style.getPropertyValue('transform');\n    var transformValue = Math.abs(parseInt(transform.split(',')[4]) || 0);\n\n    if (scrollingDirection === 'left') {\n      transformValue *= -1;\n    }\n\n    navScrollerContent.classList.add('no-transition');\n    navScrollerContent.style.transform = '';\n    navScroller.scrollLeft = navScroller.scrollLeft + transformValue;\n    navScrollerContent.classList.remove('no-transition');\n\n    scrolling = false;\n  }\n\n\n  // Toggle buttons depending on overflow\n  const toggleButtons = function(overflow) {\n    navScrollerLeft.classList.remove('active');\n    navScrollerRight.classList.remove('active');\n\n    if (overflow === 'both' || overflow === 'left') {\n      navScrollerLeft.classList.add('active');\n    }\n\n    if (overflow === 'both' || overflow === 'right') {\n      navScrollerRight.classList.add('active');\n    }\n  }\n\n\n  const init = function() {\n\n    // Determine scroll overflow\n    setOverflow();\n\n    // Scroll listener\n    navScroller.addEventListener('scroll', () => {\n      requestSetOverflow();\n    });\n\n    // Resize listener\n    window.addEventListener('resize', () => {\n      requestSetOverflow();\n    });\n\n    // Button listeners\n    navScrollerLeft.addEventListener('click', () => {\n      moveScroller('left');\n    });\n\n    navScrollerRight.addEventListener('click', () => {\n      moveScroller('right');\n    });\n\n    // Set scroller position\n    navScrollerContent.addEventListener('transitionend', () => {\n      setScrollerPosition();\n    });\n\n  };\n\n  // Init is called by default\n  init();\n\n\n  // Reveal API\n  return {\n    init\n  };\n\n};\n\nexport default navScroller;\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzY3JpcHRzL21haW4uanMiLCJzY3JpcHRzL3ByaW9yaXR5LW5hdi1zY3JvbGxlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUE7Ozs7OztBQUVBO0FBQ0EsSUFBTSxxQkFBcUIsbUNBQVksRUFBWixDQUEzQjs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7O0FDakJBOzs7Ozs7Ozs7Ozs7O0FBY0EsSUFBTSxjQUFjLHVCQU9WO0FBQUEsaUZBQUosRUFBSTtBQUFBLGtDQU5OLGVBTU07QUFBQSxNQU5XLGVBTVgsd0NBTjZCLHVCQU03QjtBQUFBLDJCQUxOLFFBS007QUFBQSxNQUxJLFFBS0osaUNBTGUsZUFLZjtBQUFBLGtDQUpOLGVBSU07QUFBQSxNQUpXLGVBSVgsd0NBSjZCLHVCQUk3QjtBQUFBLG1DQUhOLGtCQUdNO0FBQUEsTUFIYyxrQkFHZCx5Q0FIbUMseUJBR25DO0FBQUEsbUNBRk4sbUJBRU07QUFBQSxNQUZlLG1CQUVmLHlDQUZxQywwQkFFckM7QUFBQSw2QkFETixVQUNNO0FBQUEsTUFETSxVQUNOLG1DQURtQixFQUNuQjs7QUFFUixNQUFJLFlBQVksS0FBaEI7QUFDQSxNQUFJLHFCQUFxQixFQUF6QjtBQUNBLE1BQUksaUJBQWlCLEVBQXJCO0FBQ0EsTUFBSSxnQkFBSjs7QUFFQSxNQUFJLDJCQUFKOztBQUVBLE1BQUksZ0JBQWdCLFFBQWhCLEtBQTZCLENBQWpDLEVBQW9DO0FBQ2xDLHlCQUFxQixlQUFyQjtBQUNELEdBRkQsTUFHSztBQUNILHlCQUFxQixTQUFTLGFBQVQsQ0FBdUIsZUFBdkIsQ0FBckI7QUFDRDtBQUNELE1BQUksdUJBQXVCLFNBQXZCLElBQW9DLHVCQUF1QixJQUEvRCxFQUFxRTs7QUFFckUsTUFBSSxjQUFjLG1CQUFtQixhQUFuQixDQUFpQyxRQUFqQyxDQUFsQjtB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QUFQLElBQU8sR0FBVzs7QUFFdEI7QUFDQTs7QUFFQTtBQUNBLGdCQUFZLGdCQUFaLENBQTZCLFFBQTdCLEVBQXVDLFlBQU07QUFDM0M7QUFDRCxLQUZEOztBQUlBO0FBQ0EsV0FBTyxnQkFBUCxDQUF3QixRQUF4QixFQUFrQyxZQUFNO0FBQ3RDO0FBQ0QsS0FGRDs7QUFJQTtBQUNBLG9CQUFnQixnQkFBaEIsQ0FBaUMsT0FBakMsRUFBMEMsWUFBTTtBQUM5QyxtQkFBYSxNQUFiO0FBQ0QsS0FGRDs7QUFJQSxxQkFBaUIsZ0JBQWpCLENBQWtDLE9BQWxDLEVBQTJDLFlBQU07QUFDL0MsbUJBQWEsT0FBYjtBQUNELEtBRkQ7O0FBSUE7QUFDQSx1QkFBbUIsZ0JBQW5CLENBQW9DLGVBQXBDLEVBQXFELFlBQU07QUFDekQ7QUFDRCxLQUZEO0FBSUQsR0E3QkQ7O0FBK0JBO0FBQ0E7O0FBR0E7QUFDQSxTQUFPO0FBQ0w7QUFESyxHQUFQO0FBSUQsQ0ExTUQ7O2tCQTRNZSxXIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiaW1wb3J0IG5hdlNjcm9sbGVyIGZyb20gJy4vcHJpb3JpdHktbmF2LXNjcm9sbGVyLmpzJztcblxuLy8gRXhhbXBsZVxuY29uc3QgbmF2U2Nyb2xsZXJFeGFtcGxlID0gbmF2U2Nyb2xsZXIoe1xuXG59KTtcblxuLy8gY29uc3QgbmF2U2Nyb2xsZXJFeGFtcGxlMiA9IG5hdlNjcm9sbGVyKHtcbi8vICAgd3JhcHBlclNlbGVjdG9yOiAnLm5hdi1zY3JvbGxlci13cmFwcGVyMicsXG4vLyAgIHNlbGVjdG9yOiAnLm5hdi1zY3JvbGxlcjInLFxuLy8gICBjb250ZW50U2VsZWN0b3I6ICcubmF2LXNjcm9sbGVyLWNvbnRlbnQyJ1xuLy8gfSk7XG5cbi8vIGNvbnN0IG5hdlNjcm9sbGVyRXhhbXBsZTMgPSBuYXZTY3JvbGxlcih7XG4vLyAgIHdyYXBwZXJTZWxlY3RvcjogJy5uYXYtc2Nyb2xsZXItd3JhcHBlcjMnLFxuLy8gICBzZWxlY3RvcjogJy5uYXYtc2Nyb2xsZXIzJyxcbi8vICAgY29udGVudFNlbGVjdG9yOiAnLm5hdi1zY3JvbGxlci1jb250ZW50Mydcbi8vIH0pO1xuIiwiLyoqXG4gIEhvcml6b250YWwgc2Nyb2xsaW5nIG1lbnUuXG5cbiAgQHBhcmFtIHtPYmplY3R9IG9iamVjdCAtIENvbnRhaW5lciBmb3IgYWxsIG9wdGlvbnMuXG4gIEBwYXJhbSB7c3RyaW5nIHx8IERPTSBub2RlfSB3cmFwcGVyU2VsZWN0b3IgLSBDb250YWluZXIgZWxlbWVudCBzZWxlY3Rvci5cbiAgQHBhcmFtIHtzdHJpbmd9IHNlbGVjdG9yIC0gU2Nyb2xsZXIgZWxlbWVudCBzZWxlY3Rvci5cbiAgQHBhcmFtIHtzdHJpbmd9IGNvbnRlbnRTZWxlY3RvciAtIFNjcm9sbGVyIGNvbnRlbnQgZWxlbWVudCBzZWxlY3Rvci5cbiAgQHBhcmFtIHtzdHJpbmd9IGJ1dHRvbkxlZnRTZWxlY3RvciAtIExlZnQgYnV0dG9uIHNlbGVjdG9yLlxuICBAcGFyYW0ge3N0cmluZ30gYnV0dG9uUmlnaHRTZWxlY3RvciAtIFJpZ2h0IGJ1dHRvbiBzZWxlY3Rvci5cbiAgQHBhcmFtIHtpbnRlZ2VyfSBzY3JvbGxTdGVwIC0gQW1vdW50IHRvIHNjcm9sbCBvbiBidXR0b24gY2xpY2suXG5cbioqL1xuXG5cbmNvbnN0IG5hdlNjcm9sbGVyID0gZnVuY3Rpb24oe1xuICAgIHdyYXBwZXJTZWxlY3Rvcjogd3JhcHBlclNlbGVjdG9yID0gJy5uYXYtc2Nyb2xsZXItd3JhcHBlcicsXG4gICAgc2VsZWN0b3I6IHNlbGVjdG9yID0gJy5uYXYtc2Nyb2xsZXInLFxuICAgIGNvbnRlbnRTZWxlY3RvcjogY29udGVudFNlbGVjdG9yID0gJy5uYXYtc2Nyb2xsZXItY29udGVudCcsXG4gICAgYnV0dG9uTGVmdFNlbGVjdG9yOiBidXR0b25MZWZ0U2VsZWN0b3IgPSAnLm5hdi1zY3JvbGxlci1idG4tLWxlZnQnLFxuICAgIGJ1dHRvblJpZ2h0U2VsZWN0b3I6IGJ1dHRvblJpZ2h0U2VsZWN0b3IgPSAnLm5hdi1zY3JvbGxlci1idG4tLXJpZ2h0JyxcbiAgICBzY3JvbGxTdGVwOiBzY3JvbGxTdGVwID0gNzVcbiAgfSA9IHt9KSB7XG5cbiAgbGV0IHNjcm9sbGluZyA9IGZhbHNlO1xuICBsZXQgc2Nyb2xsaW5nRGlyZWN0aW9uID0gJyc7XG4gIGxldCBzY3JvbGxPdmVyZmxvdyA9ICcnO1xuICBsZXQgdGltZW91dDtcblxuICBsZXQgbmF2U2Nyb2xsZXJXcmFwcGVyO1xuXG4gIGlmICh3cmFwcGVyU2VsZWN0b3Iubm9kZVR5cGUgPT09IDEpIHtcbiAgICBuYXZTY3JvbGxlcldyYXBwZXIgPSB3cmFwcGVyU2VsZWN0b3I7XG4gIH1cbiAgZWxzZSB7XG4gICAgbmF2U2Nyb2xsZXJXcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih3cmFwcGVyU2VsZWN0b3IpO1xuICB9XG4gIGlmIChuYXZTY3JvbGxlcldyYXBwZXIgPT09IHVuZGVmaW5lZCB8fCBuYXZTY3JvbGxlcldyYXBwZXIgPT09IG51bGwpIHJldHVybjtcblxuICBsZXQgbmF2U2Nyb2xsZXIgPSBuYXZTY3JvbGxlcldyYXBwZXIucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gIGxldCBuYXZTY3JvbGxlckNvbnRlbnQgPSBuYXZTY3JvbGxlcldyYXBwZXIucXVlcnlTZWxlY3Rvcihjb250ZW50U2VsZWN0b3IpO1xuICBsZXQgbmF2U2Nyb2xsZXJMZWZ0ID0gbmF2U2Nyb2xsZXJXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoYnV0dG9uTGVmdFNlbGVjdG9yKTtcbiAgbGV0IG5hdlNjcm9sbGVyUmlnaHQgPSBuYXZTY3JvbGxlcldyYXBwZXIucXVlcnlTZWxlY3RvcihidXR0b25SaWdodFNlbGVjdG9yKTtcblxuXG4gIC8vIFNldHMgb3ZlcmZsb3dcbiAgY29uc3Qgc2V0T3ZlcmZsb3cgPSBmdW5jdGlvbigpIHtcbiAgICBzY3JvbGxPdmVyZmxvdyA9IGdldE92ZXJmbG93KG5hdlNjcm9sbGVyQ29udGVudCwgbmF2U2Nyb2xsZXIpO1xuICAgIHRvZ2dsZUJ1dHRvbnMoc2Nyb2xsT3ZlcmZsb3cpO1xuICB9XG5cblxuICAvLyBEZWJvdW5jZSBzZXR0aW5nIHRoZSBvdmVyZmxvdyB3aXRoIHJlcXVlc3RBbmltYXRpb25GcmFtZVxuICBjb25zdCByZXF1ZXN0U2V0T3ZlcmZsb3cgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGltZW91dCkge1xuICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRpbWVvdXQpO1xuICAgIH1cblxuICAgIHRpbWVvdXQgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIHNldE92ZXJmbG93KCk7XG4gICAgfSk7XG4gIH1cblxuXG4gIC8vIEdldCBvdmVyZmxvdyB2YWx1ZSBvbiBzY3JvbGxlclxuICBjb25zdCBnZXRPdmVyZmxvdyA9IGZ1bmN0aW9uKGNvbnRlbnQsIGNvbnRhaW5lcikge1xuICAgIGxldCBjb250YWluZXJNZXRyaWNzID0gY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGxldCBjb250YWluZXJXaWR0aCA9IGNvbnRhaW5lck1ldHJpY3Mud2lkdGg7XG4gICAgbGV0IGNvbnRhaW5lck1ldHJpY3NMZWZ0ID0gTWF0aC5mbG9vcihjb250YWluZXJNZXRyaWNzLmxlZnQpO1xuXG4gICAgLy8gbGV0IGNvbnRlbnRNZXRyaWNzID0gY29udGVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAvLyBsZXQgY29udGVudE1ldHJpY3NSaWdodCA9IE1hdGguZmxvb3IoY29udGVudE1ldHJpY3MucmlnaHQpO1xuICAgIC8vIGxldCBjb250ZW50TWV0cmljc0xlZnQgPSBNYXRoLmZsb29yKGNvbnRlbnRNZXRyaWNzLmxlZnQpO1xuXG5cbiAgICBsZXQgY29udGVudEl0ZW1zID0gY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCcubmF2LXNjcm9sbGVyLWl0ZW0nKTtcbiAgICBsZXQgY29udGVudE1ldHJpY3NGaXJzdCA9IGNvbnRlbnRJdGVtc1swXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBsZXQgY29udGVudE1ldHJpY3NMYXN0ID0gY29udGVudEl0ZW1zW2NvbnRlbnRJdGVtcy5sZW5ndGggLSAxXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBsZXQgY29udGVudE1ldHJpY3NSaWdodCA9IE1hdGguZmxvb3IoY29udGVudE1ldHJpY3NMYXN0LnJpZ2h0KTtcbiAgICBsZXQgY29udGVudE1ldHJpY3NMZWZ0ID0gTWF0aC5mbG9vcihjb250ZW50TWV0cmljc0ZpcnN0LmxlZnQpO1xuXG4gICAgLy8gT2Zmc2V0IHRoZSB2YWx1ZXMgYnkgdGhlIGxlZnQgdmFsdWUgb2YgdGhlIGNvbnRhaW5lclxuICAgIGxldCBvZmZzZXQgPSBjb250YWluZXJNZXRyaWNzTGVmdDtcbiAgICBjb250YWluZXJNZXRyaWNzTGVmdCAtPSBvZmZzZXQ7XG4gICAgY29udGVudE1ldHJpY3NSaWdodCAtPSBvZmZzZXQgKyAxOyAvLyBEdWUgdG8gYW4gb2ZmIGJ5IG9uZSBidWcgaW4gaU9TXG4gICAgY29udGVudE1ldHJpY3NMZWZ0IC09IG9mZnNldDtcblxuICAgIC8vIGNvbnNvbGUubG9nIChjb250YWluZXJNZXRyaWNzTGVmdCwgY29udGVudE1ldHJpY3NMZWZ0LCBjb250YWluZXJXaWR0aCwgY29udGVudE1ldHJpY3NSaWdodCk7XG5cbiAgICBpZiAoY29udGFpbmVyTWV0cmljc0xlZnQgPiBjb250ZW50TWV0cmljc0xlZnQgJiYgY29udGFpbmVyV2lkdGggPCBjb250ZW50TWV0cmljc1JpZ2h0KSB7XG4gICAgICAgIHJldHVybiAnYm90aCc7XG4gICAgfSBlbHNlIGlmIChjb250ZW50TWV0cmljc0xlZnQgPCBjb250YWluZXJNZXRyaWNzTGVmdCkge1xuICAgICAgICByZXR1cm4gJ2xlZnQnO1xuICAgIH0gZWxzZSBpZiAoY29udGVudE1ldHJpY3NSaWdodCA+IGNvbnRhaW5lcldpZHRoKSB7XG4gICAgICAgIHJldHVybiAncmlnaHQnO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAnbm9uZSc7XG4gICAgfVxuICB9XG5cblxuICAvLyBNb3ZlIHRoZSBzY3JvbGxlciB3aXRoIGEgdHJhbnNmb3JtXG4gIGNvbnN0IG1vdmVTY3JvbGxlciA9IGZ1bmN0aW9uKGRpcmVjdGlvbikge1xuICAgIGlmIChzY3JvbGxpbmcgPT09IHRydWUpIHJldHVybjtcblxuICAgIHNldE92ZXJmbG93KCk7XG5cbiAgICBsZXQgc2Nyb2xsRGlzdGFuY2UgPSBzY3JvbGxTdGVwO1xuICAgIGxldCBzY3JvbGxBdmFpbGFibGU7XG5cblxuICAgIGlmIChzY3JvbGxPdmVyZmxvdyA9PT0gZGlyZWN0aW9uIHx8IHNjcm9sbE92ZXJmbG93ID09PSAnYm90aCcpIHtcblxuICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ2xlZnQnKSB7XG4gICAgICAgIHNjcm9sbEF2YWlsYWJsZSA9IG5hdlNjcm9sbGVyLnNjcm9sbExlZnQ7XG4gICAgICB9XG5cbiAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdyaWdodCcpIHtcbiAgICAgICAgbGV0IG5hdlNjcm9sbGVyUmlnaHRFZGdlID0gbmF2U2Nyb2xsZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkucmlnaHQ7XG4gICAgICAgIGxldCBuYXZTY3JvbGxlckNvbnRlbnRSaWdodEVkZ2UgPSBuYXZTY3JvbGxlckNvbnRlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkucmlnaHQ7XG5cbiAgICAgICAgc2Nyb2xsQXZhaWxhYmxlID0gTWF0aC5mbG9vcihuYXZTY3JvbGxlckNvbnRlbnRSaWdodEVkZ2UgLSBuYXZTY3JvbGxlclJpZ2h0RWRnZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRoZXJlIGlzIGxlc3MgdGhhdCAxLjUgc3RlcHMgYXZhaWxhYmxlIHRoZW4gc2Nyb2xsIHRoZSBmdWxsIHdheVxuICAgICAgaWYgKHNjcm9sbEF2YWlsYWJsZSA8IChzY3JvbGxTdGVwICogMS41KSkge1xuICAgICAgICBzY3JvbGxEaXN0YW5jZSA9IHNjcm9sbEF2YWlsYWJsZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICBzY3JvbGxEaXN0YW5jZSAqPSAtMTtcbiAgICAgIH1cblxuICAgICAgbmF2U2Nyb2xsZXJDb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ25vLXRyYW5zaXRpb24nKTtcbiAgICAgIG5hdlNjcm9sbGVyQ29udGVudC5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWCgnICsgc2Nyb2xsRGlzdGFuY2UgKyAncHgpJztcblxuICAgICAgc2Nyb2xsaW5nRGlyZWN0aW9uID0gZGlyZWN0aW9uO1xuICAgICAgc2Nyb2xsaW5nID0gdHJ1ZTtcbiAgICB9XG5cbiAgfVxuXG5cbiAgLy8gU2V0IHRoZSBzY3JvbGxlciBwb3NpdGlvbiBhbmQgcmVtb3ZlcyB0cmFuc2Zvcm0sIGNhbGxlZCBhZnRlciBtb3ZlU2Nyb2xsZXIoKVxuICBjb25zdCBzZXRTY3JvbGxlclBvc2l0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUobmF2U2Nyb2xsZXJDb250ZW50LCBudWxsKTtcbiAgICB2YXIgdHJhbnNmb3JtID0gc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgndHJhbnNmb3JtJyk7XG4gICAgdmFyIHRyYW5zZm9ybVZhbHVlID0gTWF0aC5hYnMocGFyc2VJbnQodHJhbnNmb3JtLnNwbGl0KCcsJylbNF0pIHx8IDApO1xuXG4gICAgaWYgKHNjcm9sbGluZ0RpcmVjdGlvbiA9PT0gJ2xlZnQnKSB7XG4gICAgICB0cmFuc2Zvcm1WYWx1ZSAqPSAtMTtcbiAgICB9XG5cbiAgICBuYXZTY3JvbGxlckNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnbm8tdHJhbnNpdGlvbicpO1xuICAgIG5hdlNjcm9sbGVyQ29udGVudC5zdHlsZS50cmFuc2Zvcm0gPSAnJztcbiAgICBuYXZTY3JvbGxlci5zY3JvbGxMZWZ0ID0gbmF2U2Nyb2xsZXIuc2Nyb2xsTGVmdCArIHRyYW5zZm9ybVZhbHVlO1xuICAgIG5hdlNjcm9sbGVyQ29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCduby10cmFuc2l0aW9uJyk7XG5cbiAgICBzY3JvbGxpbmcgPSBmYWxzZTtcbiAgfVxuXG5cbiAgLy8gVG9nZ2xlIGJ1dHRvbnMgZGVwZW5kaW5nIG9uIG92ZXJmbG93XG4gIGNvbnN0IHRvZ2dsZUJ1dHRvbnMgPSBmdW5jdGlvbihvdmVyZmxvdykge1xuICAgIG5hdlNjcm9sbGVyTGVmdC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICBuYXZTY3JvbGxlclJpZ2h0LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuXG4gICAgaWYgKG92ZXJmbG93ID09PSAnYm90aCcgfHwgb3ZlcmZsb3cgPT09ICdsZWZ0Jykge1xuICAgICAgbmF2U2Nyb2xsZXJMZWZ0LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgIH1cblxuICAgIGlmIChvdmVyZmxvdyA9PT0gJ2JvdGgnIHx8IG92ZXJmbG93ID09PSAncmlnaHQnKSB7XG4gICAgICBuYXZTY3JvbGxlclJpZ2h0LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgIH1cbiAgfVxuXG5cbiAgY29uc3QgaW5pdCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgLy8gRGV0ZXJtaW5lIHNjcm9sbCBvdmVyZmxvd1xuICAgIHNldE92ZXJmbG93KCk7XG5cbiAgICAvLyBTY3JvbGwgbGlzdGVuZXJcbiAgICBuYXZTY3JvbGxlci5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCAoKSA9PiB7XG4gICAgICByZXF1ZXN0U2V0T3ZlcmZsb3coKTtcbiAgICB9KTtcblxuICAgIC8vIFJlc2l6ZSBsaXN0ZW5lclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XG4gICAgICByZXF1ZXN0U2V0T3ZlcmZsb3coKTtcbiAgICB9KTtcblxuICAgIC8vIEJ1dHRvbiBsaXN0ZW5lcnNcbiAgICBuYXZTY3JvbGxlckxlZnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBtb3ZlU2Nyb2xsZXIoJ2xlZnQnKTtcbiAgICB9KTtcblxuICAgIG5hdlNjcm9sbGVyUmlnaHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBtb3ZlU2Nyb2xsZXIoJ3JpZ2h0Jyk7XG4gICAgfSk7XG5cbiAgICAvLyBTZXQgc2Nyb2xsZXIgcG9zaXRpb25cbiAgICBuYXZTY3JvbGxlckNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsICgpID0+IHtcbiAgICAgIHNldFNjcm9sbGVyUG9zaXRpb24oKTtcbiAgICB9KTtcblxuICB9O1xuXG4gIC8vIEluaXQgaXMgY2FsbGVkIGJ5IGRlZmF1bHRcbiAgaW5pdCgpO1xuXG5cbiAgLy8gUmV2ZWFsIEFQSVxuICByZXR1cm4ge1xuICAgIGluaXRcbiAgfTtcblxufTtcblxuZXhwb3J0IGRlZmF1bHQgbmF2U2Nyb2xsZXI7XG4iXX0="}