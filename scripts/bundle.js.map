{"version":3,"sources":["node_modules/browser-pack/_prelude.js","scripts/main.js","scripts/priority-nav-scroller.js"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import priorityNavScroller from './priority-nav-scroller.js';\n\n// Example\nconst navScrollerLinksLg = priorityNavScroller({\n  selector: '.nav-scroller--demo-links-lg'\n});\n\n// const navScrollerLinksSm = priorityNavScroller({\n//   selector: '.nav-scroller--demo-links-sm'\n// });\n\n\n\n// Init multiple nav scrollers with the same options\n// let navScrollers = document.querySelectorAll('.nav-scroller');\n\n// navScrollers.forEach((currentValue, currentIndex) => {\n//   priorityNavScroller({\n//     selector: currentValue\n//   });\n// });\n","/**\n  Horizontal scrolling menu.\n\n  @param {Object} object - Container for all options.\n  @param {string || DOM node} selector - Element selector.\n  @param {string} navSelector - Nav element selector.\n  @param {string} contentSelector - Content element selector.\n  @param {string} itemSelector - Item elements selector.\n  @param {string} buttonLeftSelector - Left button selector.\n  @param {string} buttonRightSelector - Right button selector.\n  @param {integer} scrollStep - Amount to scroll on button click.\n\n**/\n\n\nconst priorityNavScroller = function({\n    selector: selector = '.nav-scroller',\n    navSelector: navSelector = '.nav-scroller-nav',\n    contentSelector: contentSelector = '.nav-scroller-content',\n    itemSelector: itemSelector = '.nav-scroller-item',\n    buttonLeftSelector: buttonLeftSelector = '.nav-scroller-btn--left',\n    buttonRightSelector: buttonRightSelector = '.nav-scroller-btn--right',\n    scrollStep: scrollStep = 75\n  } = {}) {\n\n  let navScroller = typeof selector === 'string' ? document.querySelector(selector) : selector;\n\n  if (navScroller === undefined || navScroller === null) {\n    throw new Error('There is something wrong with your selector.');\n    return;\n  }\n\n  let navScrollerNav = navScroller.querySelector(navSelector);\n  let navScrollerContent = navScroller.querySelector(contentSelector);\n  let navScrollerContentItems = navScrollerContent.querySelectorAll(itemSelector);\n  let navScrollerLeft = navScroller.querySelector(buttonLeftSelector);\n  let navScrollerRight = navScroller.querySelector(buttonRightSelector);\n\n  let scrolling = false;\n  let scrollAvailableLeft = 0;\n  let scrollAvailableRight = 0;\n  let scrollingDirection = '';\n  let scrollOverflow = '';\n  let timeout;\n\n  // let ioOptions = {\n  //   root: navScrollerNav, // relative to document viewport\n  //   rootMargin: `0px`, // margin around root. Values are similar to css property. Unitless values not allowed\n  //   threshold: 1.0 // visible amount of item shown in relation to root\n  // };\n  // let observer = new IntersectionObserver(onChange, ioOptions);\n\n  // function onChange(changes, observer) {\n  //   changes.forEach(change => {\n  //       if (change.intersectionRatio > 0) {\n  //         console.log('overlap');\n  //       }\n  //   });\n  // }\n\n  // observer.observe(navScrollerContentItems[0]);\n\n  // Sets overflow and toggle buttons accordingly\n  const setOverflow = function() {\n    scrollOverflow = getOverflow();\n    // console.log(scrollOverflow, getOverflow2());\n    toggleButtons(scrollOverflow);\n  }\n\n\n  // Debounce setting the overflow with requestAnimationFrame\n  const requestSetOverflow = function() {\n    if (timeout) {\n      window.cancelAnimationFrame(timeout);\n    }\n\n    timeout = window.requestAnimationFrame(() => {\n      setOverflow();\n    });\n  }\n\n\n  // // Gets the overflow on the nav scroller (left, right or both)\n  // const getOverflow = function() {\n  //   let containerMetrics = navScrollerNav.getBoundingClientRect();\n  //   let containerWidth = Math.floor(containerMetrics.width);\n  //   let containerMetricsLeft = Math.floor(containerMetrics.left);\n  //   let containerMetricsRight = Math.floor(containerMetrics.right);\n\n  //   let contentMetricsFirst = navScrollerContentItems[0].getBoundingClientRect();\n  //   let contentMetricsLast = navScrollerContentItems[navScrollerContentItems.length - 1].getBoundingClientRect();\n  //   let contentMetricsLeft = Math.floor(contentMetricsFirst.left);\n  //   let contentMetricsRight = Math.floor(contentMetricsLast.right);\n\n  //   scrollAvailableLeft = navScrollerNav.scrollLeft;\n  //   scrollAvailableRight = contentMetricsRight - containerMetricsRight;\n\n  //   // Offset the values by the left value of the container\n  //   let offset = containerMetricsLeft;\n  //   containerMetricsLeft -= offset;\n  //   contentMetricsRight -= offset + 1; // Fixes an off by one bug in iOS\n  //   contentMetricsLeft -= offset;\n\n  //   if (containerMetricsLeft > contentMetricsLeft && containerWidth < contentMetricsRight) {\n  //       return 'both';\n  //   } else if (contentMetricsLeft < containerMetricsLeft) {\n  //       return 'left';\n  //   } else if (contentMetricsRight > containerWidth) {\n  //       return 'right';\n  //   } else {\n  //       return 'none';\n  //   }\n  // }\n\n\n  // Gets the overflow on the nav scroller (left, right or both)\n  const getOverflow = function() {\n    let scrollWidth = navScrollerNav.scrollWidth;\n    let scrollViewport = navScrollerNav.clientWidth;\n    let scrollLeft = navScrollerNav.scrollLeft;\n\n    scrollAvailableLeft = scrollLeft;\n    scrollAvailableRight = scrollWidth - (scrollViewport + scrollLeft);\n\n    let scrollLeftCondition = scrollAvailableLeft > 0;\n    let scrollRightCondition = scrollAvailableRight > 0;\n\n    if (scrollLeftCondition && scrollRightCondition) {\n      return 'both';\n    }\n    else if (scrollLeftCondition) {\n      return 'left';\n    }\n    else if (scrollRightCondition) {\n      return 'right';\n    }\n    else {\n      return 'none';\n    }\n\n    // console.log(scrollWidth, scrollViewport, scrollLeft, scrollAvailableLeft, scrollAvailableRight);\n  }\n\n\n\n  // Move the scroller with a transform\n  const moveScroller = function(direction) {\n\n    if (scrolling === true || (scrollOverflow !== direction && scrollOverflow !== 'both')) return;\n\n    let scrollDistance = scrollStep;\n    let scrollAvailable = direction === 'left' ? scrollAvailableLeft : scrollAvailableRight;\n\n    // If there is less that 1.5 steps available then scroll the full way\n    if (scrollAvailable < (scrollStep * 1.5)) {\n      scrollDistance = scrollAvailable;\n    }\n\n    if (direction === 'right') {\n      scrollDistance *= -1;\n    }\n\n    navScrollerContent.classList.remove('no-transition');\n    navScrollerContent.style.transform = 'translateX(' + scrollDistance + 'px)';\n\n    scrollingDirection = direction;\n    scrolling = true;\n  }\n\n\n  // Set the scroller position and removes transform, called after moveScroller()\n  const setScrollerPosition = function() {\n    var style = window.getComputedStyle(navScrollerContent, null);\n    var transform = style.getPropertyValue('transform');\n    var transformValue = Math.abs(parseInt(transform.split(',')[4]) || 0);\n\n    if (scrollingDirection === 'left') {\n      transformValue *= -1;\n    }\n\n    navScrollerContent.classList.add('no-transition');\n    navScrollerContent.style.transform = '';\n    navScrollerNav.scrollLeft = navScrollerNav.scrollLeft + transformValue;\n    navScrollerContent.classList.remove('no-transition');\n\n    scrolling = false;\n  }\n\n\n  // Toggle buttons depending on overflow\n  const toggleButtons = function(overflow) {\n    navScrollerLeft.classList.remove('active');\n    navScrollerRight.classList.remove('active');\n\n    if (overflow === 'both' || overflow === 'left') {\n      navScrollerLeft.classList.add('active');\n    }\n\n    if (overflow === 'both' || overflow === 'right') {\n      navScrollerRight.classList.add('active');\n    }\n  }\n\n\n  const init = function() {\n\n    // Determine scroll overflow\n    setOverflow();\n\n    // Resize listener\n    window.addEventListener('resize', () => {\n      requestSetOverflow();\n    });\n\n    // Scroll listener\n    navScrollerNav.addEventListener('scroll', () => {\n      requestSetOverflow();\n    });\n\n    // Set scroller position\n    navScrollerContent.addEventListener('transitionend', () => {\n      setScrollerPosition();\n    });\n\n    // Button listeners\n    navScrollerLeft.addEventListener('click', () => {\n      moveScroller('left');\n    });\n\n    navScrollerRight.addEventListener('click', () => {\n      moveScroller('right');\n    });\n\n  };\n\n\n  // Init is called by default\n  init();\n\n\n  // Reveal API\n  return {\n    init\n  };\n\n};\n\nexport default priorityNavScroller;\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzY3JpcHRzL21haW4uanMiLCJzY3JpcHRzL3ByaW9yaXR5LW5hdi1zY3JvbGxlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUE7Ozs7OztBQUVBO0FBQ0EsSUFBTSxxQkFBcUIsbUNBQW9CO0FBQzdDLFlBQVU7QUFEbUMsQ0FBcEIsQ0FBM0I7O0FBSUE7QUFDQTtBQUNBOzs7QUFJQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7O0FDcEJBOzs7Ozs7Ozs7Ozs7OztBQWVBLElBQU0sc0JBQXNCLFNBQXRCLG1CQUFzQixHQVFsQjtBQUFBLGlGQUFKLEVBQUk7QUFBQSwyQkFQTixRQU9NO0FBQUEsTUFQSSxRQU9KLGlDQVBlLGVBT2Y7QUFBQSw4QkFOTixXQU1NO0FBQUEsTUFOTyxXQU1QLG9DQU5xQixtQkFNckI7QUFBQSxrQ0FMTixlQUtNO0FBQUEsTUFMVyxlQUtYLHdDQUw2Qix1QkFLN0I7QUFBQSwrQkFKTixZQUlNO0FBQUEsTUFKUSxZQUlSLHFDQUp1QixvQkFJdkI7QUFBQSxtQ0FITixrQkFHTTtBQUFBLE1BSGMsa0JBR2QseUNBSG1DLHlCQUduQztBQUFBLG1DQUZOLG1CQUVNO0FBQUEsTUFGZSxtQkFFZix5Q0FGcUMsMEJBRXJDO0FBQUEsNkJBRE4sVUFDTTtBQUFBLE1BRE0sVUFDTixtQ0FEbUIsRUFDbkI7O0FBRVIsTUFBSSxjQUFjLE9BQU8sUUFBUCxLQUFvQixRQUFwQixHQUErQixTQUFTLGFBQVQsQ0FBdUIsUUFBdkIsQ0FBL0IsR0FBa0UsUUFBcEY7O0FBRUEsTUFBSSxnQkFBZ0IsU0FBaEIsSUFBNkIsZ0JBQWdCLElBQWpELEVBQXVEO0FBQ3JELFVBQU0sSUFBSSxLQUFKLENBQVUsOENBQVYsQ0FBTjtBQUNBO0FBQ0Q7O0FBRUQsTUFBSSxpQkFBaUIsWUFBWSxhQUFaLENBQTBCLFdBQTFCLENBQXJCO0FBQ0EsTUFBSSxx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QUFDRCxLQUZEOztBQUlBO0FBQ0Esb0JBQWdCLGdCQUFoQixDQUFpQyxPQUFqQyxFQUEwQyxZQUFNO0FBQzlDLG1CQUFhLE1BQWI7QUFDRCxLQUZEOztBQUlBLHFCQUFpQixnQkFBakIsQ0FBa0MsT0FBbEMsRUFBMkMsWUFBTTtBQUMvQyxtQkFBYSxPQUFiO0FBQ0QsS0FGRDtBQUlELEdBN0JEOztBQWdDQTtBQUNBOztBQUdBO0FBQ0EsU0FBTztBQUNMO0FBREssR0FBUDtBQUlELENBdE9EOztrQkF3T2UsbUIiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJpbXBvcnQgcHJpb3JpdHlOYXZTY3JvbGxlciBmcm9tICcuL3ByaW9yaXR5LW5hdi1zY3JvbGxlci5qcyc7XG5cbi8vIEV4YW1wbGVcbmNvbnN0IG5hdlNjcm9sbGVyTGlua3NMZyA9IHByaW9yaXR5TmF2U2Nyb2xsZXIoe1xuICBzZWxlY3RvcjogJy5uYXYtc2Nyb2xsZXItLWRlbW8tbGlua3MtbGcnXG59KTtcblxuLy8gY29uc3QgbmF2U2Nyb2xsZXJMaW5rc1NtID0gcHJpb3JpdHlOYXZTY3JvbGxlcih7XG4vLyAgIHNlbGVjdG9yOiAnLm5hdi1zY3JvbGxlci0tZGVtby1saW5rcy1zbSdcbi8vIH0pO1xuXG5cblxuLy8gSW5pdCBtdWx0aXBsZSBuYXYgc2Nyb2xsZXJzIHdpdGggdGhlIHNhbWUgb3B0aW9uc1xuLy8gbGV0IG5hdlNjcm9sbGVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXYtc2Nyb2xsZXInKTtcblxuLy8gbmF2U2Nyb2xsZXJzLmZvckVhY2goKGN1cnJlbnRWYWx1ZSwgY3VycmVudEluZGV4KSA9PiB7XG4vLyAgIHByaW9yaXR5TmF2U2Nyb2xsZXIoe1xuLy8gICAgIHNlbGVjdG9yOiBjdXJyZW50VmFsdWVcbi8vICAgfSk7XG4vLyB9KTtcbiIsIi8qKlxuICBIb3Jpem9udGFsIHNjcm9sbGluZyBtZW51LlxuXG4gIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgLSBDb250YWluZXIgZm9yIGFsbCBvcHRpb25zLlxuICBAcGFyYW0ge3N0cmluZyB8fCBET00gbm9kZX0gc2VsZWN0b3IgLSBFbGVtZW50IHNlbGVjdG9yLlxuICBAcGFyYW0ge3N0cmluZ30gbmF2U2VsZWN0b3IgLSBOYXYgZWxlbWVudCBzZWxlY3Rvci5cbiAgQHBhcmFtIHtzdHJpbmd9IGNvbnRlbnRTZWxlY3RvciAtIENvbnRlbnQgZWxlbWVudCBzZWxlY3Rvci5cbiAgQHBhcmFtIHtzdHJpbmd9IGl0ZW1TZWxlY3RvciAtIEl0ZW0gZWxlbWVudHMgc2VsZWN0b3IuXG4gIEBwYXJhbSB7c3RyaW5nfSBidXR0b25MZWZ0U2VsZWN0b3IgLSBMZWZ0IGJ1dHRvbiBzZWxlY3Rvci5cbiAgQHBhcmFtIHtzdHJpbmd9IGJ1dHRvblJpZ2h0U2VsZWN0b3IgLSBSaWdodCBidXR0b24gc2VsZWN0b3IuXG4gIEBwYXJhbSB7aW50ZWdlcn0gc2Nyb2xsU3RlcCAtIEFtb3VudCB0byBzY3JvbGwgb24gYnV0dG9uIGNsaWNrLlxuXG4qKi9cblxuXG5jb25zdCBwcmlvcml0eU5hdlNjcm9sbGVyID0gZnVuY3Rpb24oe1xuICAgIHNlbGVjdG9yOiBzZWxlY3RvciA9ICcubmF2LXNjcm9sbGVyJyxcbiAgICBuYXZTZWxlY3RvcjogbmF2U2VsZWN0b3IgPSAnLm5hdi1zY3JvbGxlci1uYXYnLFxuICAgIGNvbnRlbnRTZWxlY3RvcjogY29udGVudFNlbGVjdG9yID0gJy5uYXYtc2Nyb2xsZXItY29udGVudCcsXG4gICAgaXRlbVNlbGVjdG9yOiBpdGVtU2VsZWN0b3IgPSAnLm5hdi1zY3JvbGxlci1pdGVtJyxcbiAgICBidXR0b25MZWZ0U2VsZWN0b3I6IGJ1dHRvbkxlZnRTZWxlY3RvciA9ICcubmF2LXNjcm9sbGVyLWJ0bi0tbGVmdCcsXG4gICAgYnV0dG9uUmlnaHRTZWxlY3RvcjogYnV0dG9uUmlnaHRTZWxlY3RvciA9ICcubmF2LXNjcm9sbGVyLWJ0bi0tcmlnaHQnLFxuICAgIHNjcm9sbFN0ZXA6IHNjcm9sbFN0ZXAgPSA3NVxuICB9ID0ge30pIHtcblxuICBsZXQgbmF2U2Nyb2xsZXIgPSB0eXBlb2Ygc2VsZWN0b3IgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcikgOiBzZWxlY3RvcjtcblxuICBpZiAobmF2U2Nyb2xsZXIgPT09IHVuZGVmaW5lZCB8fCBuYXZTY3JvbGxlciA9PT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBFcnJvcignVGhlcmUgaXMgc29tZXRoaW5nIHdyb25nIHdpdGggeW91ciBzZWxlY3Rvci4nKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBsZXQgbmF2U2Nyb2xsZXJOYXYgPSBuYXZTY3JvbGxlci5xdWVyeVNlbGVjdG9yKG5hdlNlbGVjdG9yKTtcbiAgbGV0IG5hdlNjcm9sbGVyQ29udGVudCA9IG5hdlNjcm9sbGVyLnF1ZXJ5U2VsZWN0b3IoY29udGVudFNlbGVjdG9yKTtcbiAgbGV0IG5hdlNjcm9sbGVyQ29udGVudEl0ZW1zID0gbmF2U2Nyb2xsZXJDb250ZW50LnF1ZXJ5U2VsZWN0b3JBbGwoaXRlbVNlbGVjdG9yKTtcbiAgbGV0IG5hdlNjcm9sbGVyTGVmdCA9IG5hdlNjcm9sbGVyLnF1ZXJ5U2VsZWN0b3IoYnV0dG9uTGVmdFNlbGVjdG9yKTtcbiAgbGV0IG5hdlNjcm9sbGVyUmlnaHQgPSBuYXZTY3JvbGxlci5xdWVyeVNlbGVjdG9yKGJ1dHRvblJpZ2h0U2VsZWN0b3IpO1xuXG4gIGxldCBzY3JvbGxpbmcgPSBmYWxzZTtcbiAgbGV0IHNjcm9sbEF2YWlsYWJsZUxlZnQgPSAwO1xuICBsZXQgc2Nyb2xsQXZhaWxhYmxlUmlnaHQgPSAwO1xuICBsZXQgc2Nyb2xsaW5nRGlyZWN0aW9uID0gJyc7XG4gIGxldCBzY3JvbGxPdmVyZmxvdyA9ICcnO1xuICBsZXQgdGltZW91dDtcblxuICAvLyBsZXQgaW9PcHRpb25zID0ge1xuICAvLyAgIHJvb3Q6IG5hdlNjcm9sbGVyTmF2LCAvLyByZWxhdGl2ZSB0byBkb2N1bWVudCB2aWV3cG9ydFxuICAvLyAgIHJvb3RNYXJnaW46IGAwcHhgLCAvLyBtYXJnaW4gYXJvdW5kIHJvb3QuIFZhbHVlcyBhcmUgc2ltaWxhciB0byBjc3MgcHJvcGVydHkuIFVuaXRsZXNzIHZhbHVlcyBub3QgYWxsb3dlZFxuICAvLyAgIHRocmVzaG9sZDogMS4wIC8vIHZpc2libGUgYW1vdW50IG9mIGl0ZW0gc2hvd24gaW4gcmVsYXRpb24gdG8gcm9vdFxuICAvLyB9O1xuICAvLyBsZXQgb2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIob25DaGFuZ2UsIGlvT3B0aW9ucyk7XG5cbiAgLy8gZnVuY3Rpb24gb25DaGFuZ2UoY2hhbmdlcywgb2JzZXJ2ZXIpIHtcbiAgLy8gICBjaGFuZ2VzLmZvckVhY2goY2hhbmdlID0+IHtcbiAgLy8gICAgICAgaWYgKGNoYW5nZS5pbnRlcnNlY3Rpb25SYXRpbyA+IDApIHtcbiAgLy8gICAgICAgICBjb25zb2xlLmxvZygnb3ZlcmxhcCcpO1xuICAvLyAgICAgICB9XG4gIC8vICAgfSk7XG4gIC8vIH1cblxuICAvLyBvYnNlcnZlci5vYnNlcnZlKG5hdlNjcm9sbGVyQ29udGVudEl0ZW1zWzBdKTtcblxuICAvLyBTZXRzIG92ZXJmbG93IGFuZCB0b2dnbGUgYnV0dG9ucyBhY2NvcmRpbmdseVxuICBjb25zdCBzZXRPdmVyZmxvdyA9IGZ1bmN0aW9uKCkge1xuICAgIHNjcm9sbE92ZXJmbG93ID0gZ2V0T3ZlcmZsb3coKTtcbiAgICAvLyBjb25zb2xlLmxvZyhzY3JvbGxPdmVyZmxvdywgZ2V0T3ZlcmZsb3cyKCkpO1xuICAgIHRvZ2dsZUJ1dHRvbnMoc2Nyb2xsT3ZlcmZsb3cpO1xuICB9XG5cblxuICAvLyBEZWJvdW5jZSBzZXR0aW5nIHRoZSBvdmVyZmxvdyB3aXRoIHJlcXVlc3RBbmltYXRpb25GcmFtZVxuICBjb25zdCByZXF1ZXN0U2V0T3ZlcmZsb3cgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGltZW91dCkge1xuICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRpbWVvdXQpO1xuICAgIH1cblxuICAgIHRpbWVvdXQgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIHNldE92ZXJmbG93KCk7XG4gICAgfSk7XG4gIH1cblxuXG4gIC8vIC8vIEdldHMgdGhlIG92ZXJmbG93IG9uIHRoZSBuYXYgc2Nyb2xsZXIgKGxlZnQsIHJpZ2h0IG9yIGJvdGgpXG4gIC8vIGNvbnN0IGdldE92ZXJmbG93ID0gZnVuY3Rpb24oKSB7XG4gIC8vICAgbGV0IGNvbnRhaW5lck1ldHJpY3MgPSBuYXZTY3JvbGxlck5hdi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgLy8gICBsZXQgY29udGFpbmVyV2lkdGggPSBNYXRoLmZsb29yKGNvbnRhaW5lck1ldHJpY3Mud2lkdGgpO1xuICAvLyAgIGxldCBjb250YWluZXJNZXRyaWNzTGVmdCA9IE1hdGguZmxvb3IoY29udGFpbmVyTWV0cmljcy5sZWZ0KTtcbiAgLy8gICBsZXQgY29udGFpbmVyTWV0cmljc1JpZ2h0ID0gTWF0aC5mbG9vcihjb250YWluZXJNZXRyaWNzLnJpZ2h0KTtcblxuICAvLyAgIGxldCBjb250ZW50TWV0cmljc0ZpcnN0ID0gbmF2U2Nyb2xsZXJDb250ZW50SXRlbXNbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIC8vICAgbGV0IGNvbnRlbnRNZXRyaWNzTGFzdCA9IG5hdlNjcm9sbGVyQ29udGVudEl0ZW1zW25hdlNjcm9sbGVyQ29udGVudEl0ZW1zLmxlbmd0aCAtIDFdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAvLyAgIGxldCBjb250ZW50TWV0cmljc0xlZnQgPSBNYXRoLmZsb29yKGNvbnRlbnRNZXRyaWNzRmlyc3QubGVmdCk7XG4gIC8vICAgbGV0IGNvbnRlbnRNZXRyaWNzUmlnaHQgPSBNYXRoLmZsb29yKGNvbnRlbnRNZXRyaWNzTGFzdC5yaWdodCk7XG5cbiAgLy8gICBzY3JvbGxBdmFpbGFibGVMZWZ0ID0gbmF2U2Nyb2xsZXJOYXYuc2Nyb2xsTGVmdDtcbiAgLy8gICBzY3JvbGxBdmFpbGFibGVSaWdodCA9IGNvbnRlbnRNZXRyaWNzUmlnaHQgLSBjb250YWluZXJNZXRyaWNzUmlnaHQ7XG5cbiAgLy8gICAvLyBPZmZzZXQgdGhlIHZhbHVlcyBieSB0aGUgbGVmdCB2YWx1ZSBvZiB0aGUgY29udGFpbmVyXG4gIC8vICAgbGV0IG9mZnNldCA9IGNvbnRhaW5lck1ldHJpY3NMZWZ0O1xuICAvLyAgIGNvbnRhaW5lck1ldHJpY3NMZWZ0IC09IG9mZnNldDtcbiAgLy8gICBjb250ZW50TWV0cmljc1JpZ2h0IC09IG9mZnNldCArIDE7IC8vIEZpeGVzIGFuIG9mZiBieSBvbmUgYnVnIGluIGlPU1xuICAvLyAgIGNvbnRlbnRNZXRyaWNzTGVmdCAtPSBvZmZzZXQ7XG5cbiAgLy8gICBpZiAoY29udGFpbmVyTWV0cmljc0xlZnQgPiBjb250ZW50TWV0cmljc0xlZnQgJiYgY29udGFpbmVyV2lkdGggPCBjb250ZW50TWV0cmljc1JpZ2h0KSB7XG4gIC8vICAgICAgIHJldHVybiAnYm90aCc7XG4gIC8vICAgfSBlbHNlIGlmIChjb250ZW50TWV0cmljc0xlZnQgPCBjb250YWluZXJNZXRyaWNzTGVmdCkge1xuICAvLyAgICAgICByZXR1cm4gJ2xlZnQnO1xuICAvLyAgIH0gZWxzZSBpZiAoY29udGVudE1ldHJpY3NSaWdodCA+IGNvbnRhaW5lcldpZHRoKSB7XG4gIC8vICAgICAgIHJldHVybiAncmlnaHQnO1xuICAvLyAgIH0gZWxzZSB7XG4gIC8vICAgICAgIHJldHVybiAnbm9uZSc7XG4gIC8vICAgfVxuICAvLyB9XG5cblxuICAvLyBHZXRzIHRoZSBvdmVyZmxvdyBvbiB0aGUgbmF2IHNjcm9sbGVyIChsZWZ0LCByaWdodCBvciBib3RoKVxuICBjb25zdCBnZXRPdmVyZmxvdyA9IGZ1bmN0aW9uKCkge1xuICAgIGxldCBzY3JvbGxXaWR0aCA9IG5hdlNjcm9sbGVyTmF2LnNjcm9sbFdpZHRoO1xuICAgIGxldCBzY3JvbGxWaWV3cG9ydCA9IG5hdlNjcm9sbGVyTmF2LmNsaWVudFdpZHRoO1xuICAgIGxldCBzY3JvbGxMZWZ0ID0gbmF2U2Nyb2xsZXJOYXYuc2Nyb2xsTGVmdDtcblxuICAgIHNjcm9sbEF2YWlsYWJsZUxlZnQgPSBzY3JvbGxMZWZ0O1xuICAgIHNjcm9sbEF2YWlsYWJsZVJpZ2h0ID0gc2Nyb2xsV2lkdGggLSAoc2Nyb2xsVmlld3BvcnQgKyBzY3JvbGxMZWZ0KTtcblxuICAgIGxldCBzY3JvbGxMZWZ0Q29uZGl0aW9uID0gc2Nyb2xsQXZhaWxhYmxlTGVmdCA+IDA7XG4gICAgbGV0IHNjcm9sbFJpZ2h0Q29uZGl0aW9uID0gc2Nyb2xsQXZhaWxhYmxlUmlnaHQgPiAwO1xuXG4gICAgaWYgKHNjcm9sbExlZnRDb25kaXRpb24gJiYgc2Nyb2xsUmlnaHRDb25kaXRpb24pIHtcbiAgICAgIHJldHVybiAnYm90aCc7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNjcm9sbExlZnRDb25kaXRpb24pIHtcbiAgICAgIHJldHVybiAnbGVmdCc7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNjcm9sbFJpZ2h0Q29uZGl0aW9uKSB7XG4gICAgICByZXR1cm4gJ3JpZ2h0JztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICByZXR1cm4gJ25vbmUnO1xuICAgIH1cblxuICAgIC8vIGNvbnNvbGUubG9nKHNjcm9sbFdpZHRoLCBzY3JvbGxWaWV3cG9ydCwgc2Nyb2xsTGVmdCwgc2Nyb2xsQXZhaWxhYmxlTGVmdCwgc2Nyb2xsQXZhaWxhYmxlUmlnaHQpO1xuICB9XG5cblxuXG4gIC8vIE1vdmUgdGhlIHNjcm9sbGVyIHdpdGggYSB0cmFuc2Zvcm1cbiAgY29uc3QgbW92ZVNjcm9sbGVyID0gZnVuY3Rpb24oZGlyZWN0aW9uKSB7XG5cbiAgICBpZiAoc2Nyb2xsaW5nID09PSB0cnVlIHx8IChzY3JvbGxPdmVyZmxvdyAhPT0gZGlyZWN0aW9uICYmIHNjcm9sbE92ZXJmbG93ICE9PSAnYm90aCcpKSByZXR1cm47XG5cbiAgICBsZXQgc2Nyb2xsRGlzdGFuY2UgPSBzY3JvbGxTdGVwO1xuICAgIGxldCBzY3JvbGxBdmFpbGFibGUgPSBkaXJlY3Rpb24gPT09ICdsZWZ0JyA/IHNjcm9sbEF2YWlsYWJsZUxlZnQgOiBzY3JvbGxBdmFpbGFibGVSaWdodDtcblxuICAgIC8vIElmIHRoZXJlIGlzIGxlc3MgdGhhdCAxLjUgc3RlcHMgYXZhaWxhYmxlIHRoZW4gc2Nyb2xsIHRoZSBmdWxsIHdheVxuICAgIGlmIChzY3JvbGxBdmFpbGFibGUgPCAoc2Nyb2xsU3RlcCAqIDEuNSkpIHtcbiAgICAgIHNjcm9sbERpc3RhbmNlID0gc2Nyb2xsQXZhaWxhYmxlO1xuICAgIH1cblxuICAgIGlmIChkaXJlY3Rpb24gPT09ICdyaWdodCcpIHtcbiAgICAgIHNjcm9sbERpc3RhbmNlICo9IC0xO1xuICAgIH1cblxuICAgIG5hdlNjcm9sbGVyQ29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCduby10cmFuc2l0aW9uJyk7XG4gICAgbmF2U2Nyb2xsZXJDb250ZW50LnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVYKCcgKyBzY3JvbGxEaXN0YW5jZSArICdweCknO1xuXG4gICAgc2Nyb2xsaW5nRGlyZWN0aW9uID0gZGlyZWN0aW9uO1xuICAgIHNjcm9sbGluZyA9IHRydWU7XG4gIH1cblxuXG4gIC8vIFNldCB0aGUgc2Nyb2xsZXIgcG9zaXRpb24gYW5kIHJlbW92ZXMgdHJhbnNmb3JtLCBjYWxsZWQgYWZ0ZXIgbW92ZVNjcm9sbGVyKClcbiAgY29uc3Qgc2V0U2Nyb2xsZXJQb3NpdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKG5hdlNjcm9sbGVyQ29udGVudCwgbnVsbCk7XG4gICAgdmFyIHRyYW5zZm9ybSA9IHN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ3RyYW5zZm9ybScpO1xuICAgIHZhciB0cmFuc2Zvcm1WYWx1ZSA9IE1hdGguYWJzKHBhcnNlSW50KHRyYW5zZm9ybS5zcGxpdCgnLCcpWzRdKSB8fCAwKTtcblxuICAgIGlmIChzY3JvbGxpbmdEaXJlY3Rpb24gPT09ICdsZWZ0Jykge1xuICAgICAgdHJhbnNmb3JtVmFsdWUgKj0gLTE7XG4gICAgfVxuXG4gICAgbmF2U2Nyb2xsZXJDb250ZW50LmNsYXNzTGlzdC5hZGQoJ25vLXRyYW5zaXRpb24nKTtcbiAgICBuYXZTY3JvbGxlckNvbnRlbnQuc3R5bGUudHJhbnNmb3JtID0gJyc7XG4gICAgbmF2U2Nyb2xsZXJOYXYuc2Nyb2xsTGVmdCA9IG5hdlNjcm9sbGVyTmF2LnNjcm9sbExlZnQgKyB0cmFuc2Zvcm1WYWx1ZTtcbiAgICBuYXZTY3JvbGxlckNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnbm8tdHJhbnNpdGlvbicpO1xuXG4gICAgc2Nyb2xsaW5nID0gZmFsc2U7XG4gIH1cblxuXG4gIC8vIFRvZ2dsZSBidXR0b25zIGRlcGVuZGluZyBvbiBvdmVyZmxvd1xuICBjb25zdCB0b2dnbGVCdXR0b25zID0gZnVuY3Rpb24ob3ZlcmZsb3cpIHtcbiAgICBuYXZTY3JvbGxlckxlZnQuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgbmF2U2Nyb2xsZXJSaWdodC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcblxuICAgIGlmIChvdmVyZmxvdyA9PT0gJ2JvdGgnIHx8IG92ZXJmbG93ID09PSAnbGVmdCcpIHtcbiAgICAgIG5hdlNjcm9sbGVyTGVmdC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICB9XG5cbiAgICBpZiAob3ZlcmZsb3cgPT09ICdib3RoJyB8fCBvdmVyZmxvdyA9PT0gJ3JpZ2h0Jykge1xuICAgICAgbmF2U2Nyb2xsZXJSaWdodC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICB9XG4gIH1cblxuXG4gIGNvbnN0IGluaXQgPSBmdW5jdGlvbigpIHtcblxuICAgIC8vIERldGVybWluZSBzY3JvbGwgb3ZlcmZsb3dcbiAgICBzZXRPdmVyZmxvdygpO1xuXG4gICAgLy8gUmVzaXplIGxpc3RlbmVyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcbiAgICAgIHJlcXVlc3RTZXRPdmVyZmxvdygpO1xuICAgIH0pO1xuXG4gICAgLy8gU2Nyb2xsIGxpc3RlbmVyXG4gICAgbmF2U2Nyb2xsZXJOYXYuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgKCkgPT4ge1xuICAgICAgcmVxdWVzdFNldE92ZXJmbG93KCk7XG4gICAgfSk7XG5cbiAgICAvLyBTZXQgc2Nyb2xsZXIgcG9zaXRpb25cbiAgICBuYXZTY3JvbGxlckNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsICgpID0+IHtcbiAgICAgIHNldFNjcm9sbGVyUG9zaXRpb24oKTtcbiAgICB9KTtcblxuICAgIC8vIEJ1dHRvbiBsaXN0ZW5lcnNcbiAgICBuYXZTY3JvbGxlckxlZnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBtb3ZlU2Nyb2xsZXIoJ2xlZnQnKTtcbiAgICB9KTtcblxuICAgIG5hdlNjcm9sbGVyUmlnaHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBtb3ZlU2Nyb2xsZXIoJ3JpZ2h0Jyk7XG4gICAgfSk7XG5cbiAgfTtcblxuXG4gIC8vIEluaXQgaXMgY2FsbGVkIGJ5IGRlZmF1bHRcbiAgaW5pdCgpO1xuXG5cbiAgLy8gUmV2ZWFsIEFQSVxuICByZXR1cm4ge1xuICAgIGluaXRcbiAgfTtcblxufTtcblxuZXhwb3J0IGRlZmF1bHQgcHJpb3JpdHlOYXZTY3JvbGxlcjtcbiJdfQ=="}